"use strict";exports.__esModule=true;var dms_date=function(){function dms_date(){}dms_date.format=function(dateBase,format,lang){if(dateBase===void 0){dateBase=new Date}if(format===void 0){format="YYYY-MM-DD hh:mm:ss"}if(lang===void 0){lang="en"}var dateObj=dms_date.decompose(dateBase,lang);var keys=Object.keys(dateObj).sort(function(k1,k2){return k2.length-k1.length});var reg=new RegExp(keys.join("|"),"g");return format.replace(reg,function(m){return String(dateObj[m])})};dms_date.timeDiff=function(dateStart,dateEnd){if(dateEnd===void 0){dateEnd=new Date}var startStamp=+this.dateIt(dateStart);var endStamp=+this.dateIt(dateEnd);var _a=startStamp<=endStamp?[startStamp,endStamp]:[endStamp,startStamp],dateBefore=_a[0],dateAfter=_a[1];var different={forword:startStamp<=endStamp,diff:[]};var discrepancy=dateAfter-dateBefore;different.diff.push(Math.floor(discrepancy/this.multiple(0)));different.diff.push(Math.floor(discrepancy/this.multiple(1))%24);different.diff.push(Math.floor(discrepancy/this.multiple(2))%60);different.diff.push(Math.floor(discrepancy/this.multiple(3))%60);different.diff.push(Math.floor(discrepancy/this.multiple(4))%1e3);return different};dms_date.timeOffset=function(offset,dateBase){var _this=this;if(dateBase===void 0){dateBase=+new Date}var offsetMillisecond=0;offset.diff.forEach(function(t,i){offsetMillisecond+=t*_this.multiple(i)});return new Date(+this.dateIt(dateBase)+(offset.forword?1:-1)*offsetMillisecond)};dms_date.getYearInfo=function(year){if(year===void 0){year=(new Date).getFullYear()}var yearInfo={};yearInfo.start=+new Date(+year,0);yearInfo.end=+new Date(+year+1,0);yearInfo.days=+year%4?365:+year%100?366:+year%400?365:366;return yearInfo};dms_date.getMonthInfo=function(year,month){if(year===void 0){year=(new Date).getFullYear()}if(month===void 0){month=(new Date).getMonth()+1}var monthInfo={};monthInfo.start=+new Date(+year,+month-1);monthInfo.end=+new Date(+month===12?+year+1:+year,+month===12?0:+month);monthInfo.days=(monthInfo.end-monthInfo.start)/this.multiple(0);return monthInfo};dms_date.getDayInfo=function(year,month,day){if(year===void 0){year=(new Date).getFullYear()}if(month===void 0){month=(new Date).getMonth()+1}if(day===void 0){day=(new Date).getDate()}var dayInfo={};dayInfo.start=+new Date(+year,+month-1,+day);dayInfo.end=dayInfo.start+this.multiple(0);var dayIndex=new Date(dayInfo.start).getDay();dayInfo.weekStart=dayInfo.start-this.multiple(0)*dayIndex;dayInfo.weekEnd=dayInfo.end+this.multiple(0)*(6-dayIndex);dayInfo.days=(dayInfo.start-this.getYearInfo(year)["start"])/this.multiple(0);dayInfo.weeks=Math.ceil((dayInfo.days-dayIndex)/7)+1;return dayInfo};dms_date.multiple=function(index){var m=[864e5,36e5,6e4,1e3,1];return m[index]};dms_date.dateIt=function(dateIn){return dateIn instanceof Date?dateIn:new Date(dateIn)};dms_date.addPadding=function(num,digits){if(digits===void 0){digits=2}var zeroArr=[];for(var i=0;i<digits;i++)zeroArr.push("0");var longNum=zeroArr.join("")+String(num);return longNum.substr(longNum.length-digits,longNum.length)};dms_date.decompose=function(dateBase,lang){if(dateBase===void 0){dateBase=new Date}if(lang===void 0){lang="en"}var local={en:{monthName:function(i){return["January","February","March","April","May","June","July","August","September","October","November","December"][i]},monthNameShort:function(i){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i]},dayName:function(i){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i]},dayNameShort:function(i){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i]},meridiem:function(h){return["AM","PM"][Math.floor(h/12)]},meridiemShort:function(h){return["A","P"][Math.floor(h/12)]}},zh:{monthName:function(i){return["一","二","三","四","五","六","七","八","九","十","十一","十二"][i]+"月"},monthNameShort:function(i){return i+1+" 月"},dayName:function(i){return"周"+["日","一","二","三","四","五","六"][i]},dayNameShort:function(i){return"星期"+["日","一","二","三","四","五","六"][i]},meridiem:function(h){return["上午","下午"][Math.floor(h/12)]},meridiemShort:function(h){return["晨","昏"][Math.floor(h/12)]}}};var dateObj={};dateBase=dms_date.dateIt(dateBase);dateObj.YYYY=dateBase.getFullYear();dateObj.M=dateBase.getMonth()+1;dateObj.D=dateBase.getDate();dateObj.dayIndex=dateBase.getDay();dateObj.H=dateBase.getHours();dateObj.h=dateObj.H%12===0?12:dateObj.H%12;dateObj.m=dateBase.getMinutes();dateObj.s=dateBase.getSeconds();dateObj.fff=dms_date.addPadding(dateBase.getMilliseconds(),3);dateObj.ff=dms_date.addPadding(Math.floor(dateBase.getMilliseconds()/10));dateObj.f=Math.floor(dateBase.getMilliseconds()/100);dateObj.zzzz=dms_date.addPadding(Math.floor(-dateBase.getTimezoneOffset()/60))+":"+dms_date.addPadding(-dateBase.getTimezoneOffset()%60);dateObj.zzz=Math.floor(-dateBase.getTimezoneOffset()/60)+":"+dms_date.addPadding(-dateBase.getTimezoneOffset()%60);dateObj.zz=dms_date.addPadding(Math.floor(-dateBase.getTimezoneOffset()/60));dateObj.z=Math.floor(-dateBase.getTimezoneOffset()/60);dateObj.YY=dateObj.YYYY.toString().substring(2);dateObj.MMMM=local[lang].monthName(+dateObj.M-1);dateObj.MMM=local[lang].monthNameShort(+dateObj.M-1);dateObj.MM=dms_date.addPadding(+dateObj.M);dateObj.DDDD=local[lang].dayName(dateObj.dayIndex);dateObj.DDD=local[lang].dayNameShort(dateObj.dayIndex);dateObj.DD=dms_date.addPadding(+dateObj.D);dateObj.HH=dms_date.addPadding(+dateObj.H);dateObj.hh=dms_date.addPadding(+dateObj.h);dateObj.mm=dms_date.addPadding(+dateObj.m);dateObj.ss=dms_date.addPadding(+dateObj.s);dateObj.TT=local[lang].meridiem(dateObj.h);dateObj.T=local[lang].meridiemShort(dateObj.h);dateObj.tt=dateObj.TT.toLowerCase();dateObj.t=dateObj.T.toLowerCase();return dateObj};return dms_date}();exports["default"]=dms_date;